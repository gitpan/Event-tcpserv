add tests for TcpSession

more (some!) documentation
